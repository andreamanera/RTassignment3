\hypertarget{_keyboard_drive_8cpp}{}\doxysection{src/\+Keyboard\+Drive.cpp File Reference}
\label{_keyboard_drive_8cpp}\index{src/KeyboardDrive.cpp@{src/KeyboardDrive.cpp}}


modality to drive the robot using the keyboard  


{\ttfamily \#include \char`\"{}ros/ros.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}geometry\+\_\+msgs/\+Twist.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}sensor\+\_\+msgs/\+Laser\+Scan.\+h\char`\"{}}\newline
{\ttfamily \#include $<$termios.\+h$>$}\newline
Include dependency graph for Keyboard\+Drive.\+cpp\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{_keyboard_drive_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{_keyboard_drive_8cpp_af5978fab9fa6dd4ced1c3a8ab1251f7b}{getch}} (void)
\begin{DoxyCompactList}\small\item\em function to have non-\/blocking keyboard input \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_keyboard_drive_8cpp_a4227105bb03c672faac7dea0c3a781e9}{choose\+\_\+input}} (char input)
\begin{DoxyCompactList}\small\item\em function to associate the input from keyboard with the correct command \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_keyboard_drive_8cpp_a7f7d866eccdabe51bb16818a792618b1}{get\+\_\+input}} ()
\begin{DoxyCompactList}\small\item\em get\+\_\+input function to display commands and compute the velocity \end{DoxyCompactList}\item 
int \mbox{\hyperlink{_keyboard_drive_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main}} (int argc, char $\ast$$\ast$argv)
\begin{DoxyCompactList}\small\item\em main \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{_keyboard_drive_8cpp_adde9f51ddf0fb5c82c57b4075b6e9400}\label{_keyboard_drive_8cpp_adde9f51ddf0fb5c82c57b4075b6e9400}} 
ros\+::\+Publisher \mbox{\hyperlink{_keyboard_drive_8cpp_adde9f51ddf0fb5c82c57b4075b6e9400}{publisher}}
\begin{DoxyCompactList}\small\item\em Global publisher. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{_keyboard_drive_8cpp_accacf4e9263030d70ed79f8516c0eac5}\label{_keyboard_drive_8cpp_accacf4e9263030d70ed79f8516c0eac5}} 
double \mbox{\hyperlink{_keyboard_drive_8cpp_accacf4e9263030d70ed79f8516c0eac5}{velocity}} = 0.\+2
\begin{DoxyCompactList}\small\item\em Global variable for linear velocity. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{_keyboard_drive_8cpp_ad0f8b5cad9317f1389ce5ab84b9a8b28}\label{_keyboard_drive_8cpp_ad0f8b5cad9317f1389ce5ab84b9a8b28}} 
double \mbox{\hyperlink{_keyboard_drive_8cpp_ad0f8b5cad9317f1389ce5ab84b9a8b28}{turn\+\_\+velocity}} = 0.\+5
\begin{DoxyCompactList}\small\item\em Global variable for turn velocity. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{_keyboard_drive_8cpp_a5bcd692957aace1a21bfc205c67ec998}\label{_keyboard_drive_8cpp_a5bcd692957aace1a21bfc205c67ec998}} 
int \mbox{\hyperlink{_keyboard_drive_8cpp_a5bcd692957aace1a21bfc205c67ec998}{linear}} = 0
\begin{DoxyCompactList}\small\item\em Global variable for linear direction. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{_keyboard_drive_8cpp_a1ca7e9bd07214a8b29d24ef9b87b5a4f}\label{_keyboard_drive_8cpp_a1ca7e9bd07214a8b29d24ef9b87b5a4f}} 
int \mbox{\hyperlink{_keyboard_drive_8cpp_a1ca7e9bd07214a8b29d24ef9b87b5a4f}{angular}} =0
\begin{DoxyCompactList}\small\item\em Global variable for angular direction. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{_keyboard_drive_8cpp_af113e9b4ca3af68972dfd3df47898c83}\label{_keyboard_drive_8cpp_af113e9b4ca3af68972dfd3df47898c83}} 
geometry\+\_\+msgs\+::\+Twist \mbox{\hyperlink{_keyboard_drive_8cpp_af113e9b4ca3af68972dfd3df47898c83}{vel}}
\begin{DoxyCompactList}\small\item\em Global variable for the overall velocity (linear \& angular) \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
modality to drive the robot using the keyboard 

\begin{DoxyAuthor}{Author}
Andrea Manera 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+0.\+0 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
12/03/2022
\end{DoxyDate}
Publishes to\+:~\newline
 /cmd\+\_\+vel to publish the velocity of the robot

Description\+:

This node aims to give the user the possibility of moving the robot in the environment using the keyboard. To opportunetly manage robot movement in the environment I have decided to implement four variables, two used for the velocity values (one for the linear velocity and one for the angular) and two used for the direction (again onefor the linear velocity and one for the angular). 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{_keyboard_drive_8cpp_a4227105bb03c672faac7dea0c3a781e9}\label{_keyboard_drive_8cpp_a4227105bb03c672faac7dea0c3a781e9}} 
\index{KeyboardDrive.cpp@{KeyboardDrive.cpp}!choose\_input@{choose\_input}}
\index{choose\_input@{choose\_input}!KeyboardDrive.cpp@{KeyboardDrive.cpp}}
\doxysubsubsection{\texorpdfstring{choose\_input()}{choose\_input()}}
{\footnotesize\ttfamily void choose\+\_\+input (\begin{DoxyParamCaption}\item[{char}]{input }\end{DoxyParamCaption})}



function to associate the input from keyboard with the correct command 


\begin{DoxyParams}{Parameters}
{\em input} & the input that we want to associate with the correct command\\
\hline
\end{DoxyParams}
This function is used to opportunetly manage the velocity, the input given by the user is associated with a specific operation thanks to a switch and so the velocity and the turn velocity are opportunetly modified \mbox{\Hypertarget{_keyboard_drive_8cpp_a7f7d866eccdabe51bb16818a792618b1}\label{_keyboard_drive_8cpp_a7f7d866eccdabe51bb16818a792618b1}} 
\index{KeyboardDrive.cpp@{KeyboardDrive.cpp}!get\_input@{get\_input}}
\index{get\_input@{get\_input}!KeyboardDrive.cpp@{KeyboardDrive.cpp}}
\doxysubsubsection{\texorpdfstring{get\_input()}{get\_input()}}
{\footnotesize\ttfamily void get\+\_\+input (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



get\+\_\+input function to display commands and compute the velocity 

This function first of all display the menu with the commands with which the user can modify the direction and the velocity then call the function choose input to compute the new velocity and then asign the computed velocity to the elements of the variable vel \mbox{\Hypertarget{_keyboard_drive_8cpp_af5978fab9fa6dd4ced1c3a8ab1251f7b}\label{_keyboard_drive_8cpp_af5978fab9fa6dd4ced1c3a8ab1251f7b}} 
\index{KeyboardDrive.cpp@{KeyboardDrive.cpp}!getch@{getch}}
\index{getch@{getch}!KeyboardDrive.cpp@{KeyboardDrive.cpp}}
\doxysubsubsection{\texorpdfstring{getch()}{getch()}}
{\footnotesize\ttfamily int getch (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



function to have non-\/blocking keyboard input 

\begin{DoxyReturn}{Returns}
ch the input given from keyboard
\end{DoxyReturn}
This function is needed to avoid pressing enter after giving an input from keyboard, this function is part of teleop\+\_\+twist\+\_\+keyboard.\+cpp. \mbox{\Hypertarget{_keyboard_drive_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}\label{_keyboard_drive_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}} 
\index{KeyboardDrive.cpp@{KeyboardDrive.cpp}!main@{main}}
\index{main@{main}!KeyboardDrive.cpp@{KeyboardDrive.cpp}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$$\ast$}]{argv }\end{DoxyParamCaption})}



main 


\begin{DoxyParams}{Parameters}
{\em argc} & An integer argument count of the command line arguments \\
\hline
{\em argv} & An argument vector of the command line arguments \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
an integer 0 upon success
\end{DoxyReturn}
The main function contains the core part of the program 